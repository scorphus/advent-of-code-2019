defmodule AdventOfCode2019.MonitoringStationTest do
  use ExUnit.Case

  @parameters_part1 [
    {[
       ".#..#",
       ".....",
       "#####",
       "....#",
       "...##"
     ], 8},
    {[
       "......#.#.",
       "#..#.#....",
       "..#######.",
       ".#.#.###..",
       ".#..#.....",
       "..#....#.#",
       "#..#....#.",
       ".##.#..###",
       "##...#..#.",
       ".#....####"
     ], 33},
    {[
       "#.#...#.#.",
       ".###....#.",
       ".#....#...",
       "##.#.#.#.#",
       "....#.#.#.",
       ".##..###.#",
       "..#...##..",
       "..##....##",
       "......#...",
       ".####.###."
     ], 35},
    {[
       ".#..#..###",
       "####.###.#",
       "....###.#.",
       "..###.##.#",
       "##.##.#.#.",
       "....###..#",
       "..#.#..#.#",
       "#..#.#.###",
       ".##...##.#",
       ".....#.#.."
     ], 41},
    {[
       ".#..##.###...#######",
       "##.############..##.",
       ".#.######.########.#",
       ".###.#######.####.#.",
       "#####.##.#.##.###.##",
       "..#####..#.#########",
       "####################",
       "#.####....###.#.#.##",
       "##.#################",
       "#####.##.###..####..",
       "..######..##.#######",
       "####.##.####...##..#",
       ".#####..#.######.###",
       "##...#.##########...",
       "#.##########.#######",
       ".####.#.###.###.#.##",
       "....##.##.###..#####",
       ".#.#.###########.###",
       "#.#.#.#####.####.###",
       "###.##.####.##.#..##"
     ], 210}
  ]

  for {belt, expected} <- @parameters_part1 do
    test "AdventOfCode2019.MonitoringStation.part1##{expected} == #{expected}" do
      assert AdventOfCode2019.MonitoringStation.part1(unquote(belt)) == unquote(expected)
    end
  end

  @belt_part2 [
    ".#..##.###...#######",
    "##.############..##.",
    ".#.######.########.#",
    ".###.#######.####.#.",
    "#####.##.#.##.###.##",
    "..#####..#.#########",
    "####################",
    "#.####....###.#.#.##",
    "##.#################",
    "#####.##.###..####..",
    "..######..##.#######",
    "####.##.####...##..#",
    ".#####..#.######.###",
    "##...#.##########...",
    "#.##########.#######",
    ".####.#.###.###.#.##",
    "....##.##.###..#####",
    ".#.#.###########.###",
    "#.#.#.#####.####.###",
    "###.##.####.##.#..##"
  ]

  @parameters_part2 [
    {1, 11 * 100 + 12},
    {2, 12 * 100 + 1},
    {3, 12 * 100 + 2},
    {10, 12 * 100 + 8},
    {20, 16 * 100 + 0},
    {50, 16 * 100 + 9},
    {100, 10 * 100 + 16},
    {199, 9 * 100 + 6},
    {200, 8 * 100 + 2},
    {201, 10 * 100 + 9},
    {299, 11 * 100 + 1},
    {300, "All asteroids already vaporized!"}
  ]

  for {nth, expected} <- @parameters_part2 do
    test "AdventOfCode2019.MonitoringStation.part2##{nth} == #{expected}" do
      assert AdventOfCode2019.MonitoringStation.part2(@belt_part2, unquote(nth)) ==
               unquote(expected)
    end
  end
end
